FROM registry.access.redhat.com/ubi9/python-311:latest

WORKDIR /app

# No additional system dependencies needed
# Python packages installed via pip from requirements.txt

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY main.py .

# Set environment variables
ENV PYTHONUNBUFFERED=1
ENV EVALHUB_MODE=k8s

# Run as non-root user
USER 1001

ENTRYPOINT ["python", "main.py"]
